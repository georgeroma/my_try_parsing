function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach(function(t){_defineProperty(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}!function(t){"use strict";t.views&&t.views.tags({tooltip:{dataBoundOnly:!0,boundProps:["text"],tooltipClass:"spa-tooltip",init:function(){var t;this.settings={delay:500,dist:10,distAlignBy:0,responsive:!0},this.text=this.tagCtx.props.text,this.tmplName=this.tagCtx.props.tmplName,this.tmplData=this.tagCtx.props.tmplData,this.contentSlr=this.tagCtx.props.contentSlr,this.classList=(null===(t=this.tagCtx.props.classes)||void 0===t?void 0:t.split(" "))||[],this.useBinding=this.tagCtx.props.useBinding,this.tagCtx.props.hasOwnProperty("distance")&&(this.settings.dist=this.tagCtx.props.distance),this.tagCtx.props.hasOwnProperty("distanceAlignBy")&&(this.settings.distAlignBy=this.tagCtx.props.distanceAlignBy),this.tagCtx.props.hasOwnProperty("delay")&&(this.settings.delay=this.tagCtx.props.delay),this.tagCtx.props.hasOwnProperty("responsive")&&(this.settings.responsive=this.tagCtx.props.responsive);var e=this.tagCtx.props.pos||"center top";this.posHorizontal=e.split(" ")[0],this.posVertical=e.split(" ")[1],this.linkedElMarkup=this.linkCtx.elem.innerHTML,this.rightCollision=this.tagCtx.props.rightCollision,this.disabled=this.tagCtx.props.disabled,this.preventDefault=this.tagCtx.props.preventDefault,this.popupMode=this.settings.responsive&&"m"===wb.settings.displayMode},onUpdate:!1,onAfterChange:function(){this.text=this.tagCtx.props.text},onBind:function(){if(this.disabled)return!1;this._bindEvents()},onUnbind:function(){this._destroy()},_bindEvents:function(){var e=this;"click"==this.tagCtx.props.trigger||this.popupMode?this.linkCtx.elem.addEventListener("click",this._positionAt.bind(this)):"Shown"==this.tagCtx.props.trigger?(this.linkCtx.elem.addEventListener("Shown",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("Unshown",this._destroy.bind(this))):(this.linkCtx.elem.addEventListener("mouseover",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("mousemove",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("mouseout",function(t){e.linkCtx.elem.contains(t.relatedTarget)||setTimeout(function(){e.insideTip||e._destroy()},e.settings.delay)}))},_destroy:function(){document.removeEventListener("click",this),!this.popupMode&&this.tooltip&&document.body.removeChild(this.tooltip),this.tooltip=null},_getMarkup:function(){return this.contentSlr?{html:document.querySelector(this.contentSlr).innerHTML}:this.tagCtx.props.useBind&&this.tmplName?{bound:!0,link:t.link[this.tmplName]}:this.tmplName?{html:t.templates[this.tmplName].render(this.tmplData,this.tagCtx.props.tmplHelper)}:this.text?{html:'<div class="tooltipster-content">'.concat(this.text,"</div>")}:null},handleEvent:function(t){"click"==t.type&&(this.linkCtx.elem.contains(t.target)||this.tooltip.contains(t.target)||this._destroy())},_positionAt:function(t){var e,s=this,i=this._getMarkup();if(i){if(this.popupMode){this.preventDefault&&t.preventDefault();var o={lockScroll:!0,modal:!1,showCloseBtn:!0,useHtml:!0,contentClasses:["content"],popupClassesList:["shown","tooltip--mobile"].concat(_toConsumableArray(this.classList)),useCenteredFunction:!0,onHide:function(){var t,e;null===(t=s.tagCtx.props.tmplHelper)||void 0===t||null===(e=t.onPopupHide)||void 0===e||e.call(t),s._destroy()}};return i.bound?o.onShow=function(t){i.link(t.querySelector(".content"),s.tmplData,_objectSpread(_objectSpread({},s.tagCtx.props.tmplHelper),{},{close:function(){return s.tooltip.close()}}))}:o.msg=i.html,void(this.tooltip=wb.popup.showCustomPopup(o))}if(!this.tooltip){if(document.querySelectorAll("."+this.tooltipClass).forEach(function(t){var e;return null===(e=t.close)||void 0===e?void 0:e.call(t)}),this.tooltip=document.createElement("div"),this.tooltip.style.display="inline-block",this.tooltip.style.position="absolute",this.tooltip.style.zIndex="11111",i.bound){var n=this.tagCtx.view;i.link(this.tooltip,this.tmplData,_objectSpread(_objectSpread({parentView:n},this.tagCtx.props.tmplHelper),{},{close:this._destroy.bind(this)}))}else this.tooltip.innerHTML=i.html;this.tooltip.classList.add(this.tooltipClass),this.tooltip.classList.addMany(this.classList),this.tooltip.close=function(){return s._destroy()},"click"!=this.tagCtx.props.trigger&&(this.tooltip.addEventListener("mouseenter",function(){return s.insideTip=!0}),this.tooltip.addEventListener("mouseleave",function(){s.insideTip=!1,setTimeout(function(){s.insideTip||s._destroy()},s.settings.delay)})),"click"==this.tagCtx.props.trigger&&document.addEventListener("click",this),document.body.appendChild(this.tooltip);var r,l,a=this.linkCtx.elem.getBoundingClientRect(),p=function(t,e){if(s.tagCtx.props.alignBy){var i=s.linkCtx.elem.closest(s.tagCtx.props.alignBy);if(i)return parseInt(i.getBoundingClientRect()[e])+s.settings.distAlignBy}return parseInt(t)};switch(this.posHorizontal){case"left":r=parseInt(a.left)-this.settings.dist-this.tooltip.offsetWidth,parseInt(a.left)-this.tooltip.offsetWidth<0&&(r=this.settings.dist);break;case"right":r=a.right+this.settings.dist,parseInt(a.right)+this.tooltip.offsetWidth>document.documentElement.clientWidth&&(r=document.documentElement.clientWidth-this.tooltip.offsetWidth-this.settings.dist);break;case"alignleft":r=p(a.left,"left");break;case"alignright":r=p(a.right,"right")-this.tooltip.offsetWidth;break;default:case"center":r=parseInt(a.left)+((null!==(e=this.linkCtx.elem.offsetWidth)&&void 0!==e?e:a.width)-this.tooltip.offsetWidth)/2;var h=parseInt(a.right)+this.tooltip.offsetWidth/2-document.documentElement.clientWidth;0<h&&(r-=h+this.settings.dist)}switch(this.posVertical){case"center":l=(parseInt(a.top)+parseInt(a.bottom))/2-this.tooltip.offsetHeight/2;break;case"bottom":l=parseInt(a.bottom)+this.settings.dist,parseInt(a.bottom)+this.tooltip.offsetHeight>document.documentElement.clientHeight&&(l=parseInt(a.top)-this.tooltip.offsetHeight-this.settings.dist);break;default:case"top":l=parseInt(a.top)-this.tooltip.offsetHeight-this.settings.dist}r=r<0?parseInt(a.left):r,l=l<0?parseInt(a.bottom)+this.settings.dist:l,this.tooltip.style.left=r+"px",this.tooltip.style.top=l+pageYOffset+"px"}}}}})}(this.jQuery);